{% extends "crud/base_crud.html" %}
{% load custom_filters %}

{% block crud_title %}Gesti√≥n de Roles{% endblock %}

{% block crud_content %}
<style>
    .roles-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 2rem;
        margin-bottom: 2rem;
    }

    .role-card {
        background: white;
        padding: 2rem;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        text-align: center;
        border-top: 4px solid #722f37;
        transition: all 0.3s ease;
    }

    .role-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 5px 20px rgba(0,0,0,0.15);
    }

    .role-icon {
        font-size: 2.5rem;
        margin-bottom: 1rem;
    }

    .role-name {
        font-size: 1.3rem;
        color: #722f37;
        margin-bottom: 0.5rem;
        font-weight: 600;
    }

    .role-count {
        font-size: 2rem;
        color: #27ae60;
        margin: 1rem 0;
        font-weight: 700;
    }

    .role-description {
        color: #666;
        font-size: 0.9rem;
        margin-bottom: 1.5rem;
    }

    .role-actions {
        display: flex;
        gap: 0.5rem;
        justify-content: center;
        flex-wrap: wrap;
    }

    .btn-small {
        padding: 0.5rem 1rem;
        font-size: 0.85rem;
        border-radius: 5px;
        text-decoration: none;
        border: none;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .btn-view {
        background: #3498db;
        color: white;
    }

    .btn-view:hover {
        background: #2980b9;
        transform: translateY(-2px);
    }
</style>

<div class="crud-header">
    <h1 class="crud-title">üîê Roles y Permisos</h1>
    <div class="crud-actions">
        <a href="{% url 'admin_panel' %}" class="btn btn-secondary">‚Üê Panel Admin</a>
    </div>
</div>

<div class="roles-container">
    {% for rol_value, rol_label in roles %}
    <div class="role-card">
        {% if rol_value == 'cliente' %}
        <div class="role-icon">üë§</div>
        <h3 class="role-name">{{ rol_label }}</h3>
        <p class="role-description">Usuarios que compran productos</p>
        {% elif rol_value == 'proveedor' %}
        <div class="role-icon">üöö</div>
        <h3 class="role-name">{{ rol_label }}</h3>
        <p class="role-description">Proveedores de productos</p>
        {% elif rol_value == 'admin' %}
        <div class="role-icon">üë®‚Äçüíº</div>
        <h3 class="role-name">{{ rol_label }}</h3>
        <p class="role-description">Administradores del sistema</p>
        {% endif %}
        
        <div class="role-count">{{ perfiles_por_rol|get_item:rol_label }}</div>
        <p style="color: #999; font-size: 0.85rem;">Usuarios en este rol</p>
    </div>
    {% endfor %}
</div>

<div style="background: white; padding: 2rem; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
    <h2 style="color: #722f37; margin-bottom: 1rem;">‚ÑπÔ∏è Informaci√≥n de Roles</h2>
    <p style="color: #666; margin-bottom: 1rem;">
        El sistema de roles permite asignar diferentes niveles de acceso a los usuarios:
    </p>
    <ul style="color: #666; margin-left: 1.5rem;">
        <li><strong style="color: #722f37;">Cliente:</strong> Pueden ver el cat√°logo, hacer compras y gestionar su perfil</li>
        <li><strong style="color: #722f37;">Proveedor:</strong> Pueden gestionar sus productos y suministros</li>
        <li><strong style="color: #722f37;">Administrador:</strong> Acceso completo al panel administrativo</li>
    </ul>
</div>

<script>
    // Filtro para acceder a valores de diccionario en templates
    document.addEventListener('DOMContentLoaded', function() {
        // Si necesitas hacer m√°s con los roles aqu√≠
    });
</script>

{% endblock %}
